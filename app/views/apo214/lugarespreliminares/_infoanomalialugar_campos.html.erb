<tr class='nested-fields'>
  <% if f.object.infoanomalia.nil? %>
    <% f.object.infoanomalia = Apo214::Infoanomalia.new %>
  <% end %>
  <%= f.simple_fields_for :infoanomalia do |inf| %>
    <td>
      <%= inf.input :id, as: :hidden %>
      <%= inf.input :anomalia,
        label: false %>
    </td>
    <td>
      <%= inf.input :descripcion, as: :text,
        label: false %>
    </td>
    <td>
      <%= inf.input :latitud_localizado,
        as: :float %>
      <%= inf.input :longitud_localizado,
        as: :float %>
      <!-- Button trigger modal -->
      <div>
        <a class="btn btn-primary togglecoord">
          Conversión
        </a>
      </div>
      <!-- Modal -->
      <div class="modal fade coord" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle">Gestión de coordenadas</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <h6>Coordenadas WGS84</h5>
              <div class="row">
                <div class="col-md-6">
                  <%= inf.input :latitud_localizado,
                    as: :float %>
                  <%= inf.input :longitud_localizado,
                    as: :float %>
                </div>
                <div class="col-md-6">
                  <div class="row">
                    <div class="col-md-4">
                      <%= inf.input :gra_lat,
                        as: :numeric %>
                    </div>
                    <div class="col-md-4">
                      <%= inf.input :min_lat,
                        as: :numeric %>
                    </div>
                    <div class="col-md-4">
                      <%= inf.input :seg_lat,
                        as: :numeric %>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-4">
                      <%= inf.input :gra_lon,
                        as: :numeric %>
                    </div>
                    <div class="col-md-4">
                      <%= inf.input :min_lon,
                        as: :numeric %>
                    </div>
                    <div class="col-md-4">
                      <%= inf.input :seg_lon,
                        as: :numeric %>
                    </div>
                  </div>
                </div>
              </div>
              <h6>Coordenadas MAGNA SIRGAS</h5>
              <div class="row">
                <div class="col-md-6">
                  <%= inf.input :latitud_sirgas %>
                </div>
                <div class="col-md-6">
                  <%= inf.input :longitud_sirgas %>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
              <button type="button" class="btn btn-primary">Guardar</button>
            </div>
          </div>
        </div>
      </div>
    </td>
    <td>
      <%= inf.input :area,
        label: false %>
    </td>
    <% inf.object.sip_anexo = Sip::Anexo.new if !inf.object.sip_anexo %>
    <%= inf.simple_fields_for :sip_anexo do |ane| %>
    <td>
      <%= render 'sip/anexos/anexo_campos', a: ane  %>
    </td>
    <% end %>
  <% end %>
  <td>
    <%= f.input :id, as: :hidden %>
    <%= link_to_remove_association "Eliminar", f, 
        :class => 'btn-danger' 
    %>
    <div><%= f.error_notification %></div>
  </td>
</tr>
